version: "3.3"
services:

  ied_server:
    image: 61850server:v2
    container_name: IED_server
    command: "/srv/server61850 "
    tty: true
    cap_add:
      - SYS_NICE
    ulimits:
      rtprio: 98
      rttime: -1
      memlock: 8428281856
    cpus: 4   # Set the number of CPUs
    mem_limit: 6g 
    networks:
      custom_bridge:
        ipv4_address: 192.168.0.61
    privileged: true


  zmq_broker:
    image: gateway:v1
    container_name: IED_zmq-61850gateway
    command: "/srv/gateway  192.168.0.61"
    tty: true
    cap_add:
      - SYS_NICE
    ulimits:
      rtprio: 98
      rttime: -1
      memlock: 8428281856
    cpus: 4   # Set the number of CPUs
    mem_limit: 6g 
    networks:
      custom_bridge:
        ipv4_address: 192.168.0.62
    privileged: true
    

  ied_zmq_sub1:
    image: zmq61850sub:v1
    container_name: IED_zmq61850sub1
    volumes:
      - ./testsub1:/app/logs
    command: "/app/wusub  192.168.0.62"
    tty: true
    cap_add:
      - SYS_NICE
    ulimits:
      rtprio: 98
      rttime: -1
      memlock: 8428281856
    cpus: 4   # Set the number of CPUs
    mem_limit: 6g 
    networks:
      custom_bridge:
        ipv4_address: 192.168.0.63
    privileged: true

 


            
networks:
  custom_bridge:
    driver: bridge
    ipam:
      driver: default
      config:
          -
            subnet: 192.168.0.0/24